"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _utils=require("../utils"),_constants=require("../constants"),_uid=require("../uid"),_core=require("@babel/core");function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);if(b)d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable});c.push.apply(c,d)}return c}function _objectSpread(a){for(var b=1,c;b<arguments.length;b++){c=null!=arguments[b]?arguments[b]:{};if(b%2){ownKeys(Object(c),!0).forEach(function(b){_defineProperty(a,b,c[b])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(a,Object.getOwnPropertyDescriptors(c))}else{ownKeys(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}}return a}function _defineProperty(a,b,c){if(b in a){Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0})}else{a[b]=c}return a}var visitor={MemberExpression:function MemberExpression(a,b){var c,d;if(b.memberExpressionNodes){c=b;d=!1}else{c=(0,_utils.getDefaultState)();c.memberExpressionNodes=[];d=!0}if("callee"!==a.key){if(a.node.computed){if(_core.types.isIdentifier(a.node.property)){c.memberExpressionNodes.unshift(a.node.property)}else if(_core.types.isNumericLiteral(a.node.property)){c.memberExpressionNodes.unshift(a.node.property)}else if(_core.types.isStringLiteral(a.node.property)){c.memberExpressionNodes.unshift(a.node.property)}else{throw["CodeSee Error: Computed MemberExpression with something fancy going on, this should have been removed by an earlier transformation stage! "+a.hub.file.opts.filename+" : "+JSON.stringify(a.node.loc)+" | "+JSON.stringify(a.node)]}}else{c.memberExpressionNodes.unshift(_core.types.stringLiteral(a.node.property.name))}}a.skipKey("property");if(_core.types.isIdentifier(a.node.object)){c.memberExpressionNodes.unshift(_core.types.stringLiteral(a.node.object.name));a.skipKey("object")}else if(_core.types.isThisExpression(a.node.object)){c.memberExpressionNodes.unshift(_core.types.stringLiteral("this"));a.skipKey("object")}else if(_core.types.isMemberExpression(a.node.object)){(0,_utils.traverseWithSkipKeys)(a,visitor,c);a.skipKey("object")}else if(_core.types.isCallExpression(a.node.object)){c.memberExpressionNodes=[]}if(d){if(!c.memberExpressionNodes||0===c.memberExpressionNodes.length){return}var h=c.memberExpressionNodes[0].value;if(!h){return}if(!_constants.reservedIdentifiers.includes(h)&&h.length){var e=(0,_uid.determineIdentifierUID)(h,a),f=h,g;if(1===c.memberExpressionNodes.length){g=h}else{g=c.memberExpressionNodes}b.accesses.push(_objectSpread({name:g,uid:e,value:f},a.node.loc&&(0,_utils.getLines)(a.node.loc)))}delete c.memberExpressionNodes}}},_default=visitor;exports["default"]=_default;