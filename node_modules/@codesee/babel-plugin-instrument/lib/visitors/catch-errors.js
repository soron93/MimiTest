"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports["default"]=void 0;var _utils=require("../utils"),_template=_interopRequireDefault(require("@babel/template"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(!a)return;if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor)c=a.constructor.name;if("Map"===c||"Set"===c)return Array.from(a);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return _arrayLikeToArray(a,b)}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){if(null==b||b>a.length)b=a.length;for(var c=0,d=Array(b);c<b;c++){d[c]=a[c]}return d}var t=require("@babel/types"),wrapWithTryCatch=(0,_template["default"])("\n{\n  STACK_FRAME_ENTER\n  try {\n    FUNCTION_BODY\n  } catch(ERROR_IDENTIFIER) {\n    CODESEE_CALL;\n    throw ERROR_IDENTIFIER;\n  }\n}\n"),_default={Function:function Function(a){if(a.node.wrappedInTryCatch){return}else{a.node.wrappedInTryCatch=!0}var b=a.get("body.body");if(!Array.isArray(b)){return}var c=b.findIndex(_utils.isStackFrameEnterStatement);if(-1===c){return}var d=b[c].node,e=d.declarations[0].id,f=_toConsumableArray(b).map(function(a){return a.node});f.splice(c,1);var g=t.identifier("e"),h=wrapWithTryCatch({STACK_FRAME_ENTER:d,FUNCTION_BODY:f,ERROR_IDENTIFIER:g,CODESEE_CALL:(0,_utils.codeSeeCall)(t,"error",[g,e])});a.get("body").replaceWith(h);a.resync()}};exports["default"]=_default;